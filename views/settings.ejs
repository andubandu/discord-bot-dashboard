<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bot Settings | Discord Bot Dashboard</title>
  <style>
    :root {
      --discord-blue: #5865F2;
      --discord-green: #57F287;
      --discord-yellow: #FEE75C;
      --discord-red: #ED4245;
      --discord-dark: #36393F;
      --discord-darker: #2F3136;
      --discord-darkest: #202225;
      --discord-light: #FFFFFF;
      --discord-muted: #B9BBBE;
      --discord-border: #23272A;
    }
    body {
      background: linear-gradient(135deg, var(--discord-darkest) 0%, var(--discord-darker) 100%);
      color: var(--discord-light);
      font-family: 'Inter', sans-serif;
      margin: 0;
    }
    .bg-discord-dark { background: var(--discord-dark); }
    .bg-discord-darker { background: var(--discord-darker); }
    .bg-discord-darkest { background: var(--discord-darkest); }
    .bg-discord-blue { background: var(--discord-blue); }
    .bg-discord-blue-hover { background: #4752C4; }
    .text-discord-blue { color: var(--discord-blue); }
    .text-discord-light { color: var(--discord-light); }
    .text-discord-muted { color: var(--discord-muted); }
    .text-discord-red { color: var(--discord-red); }
    .border-discord-border { border-color: var(--discord-border); }
    .rounded { border-radius: 0.5rem; }
    .rounded-full { border-radius: 9999px; }
    .shadow-lg { box-shadow: 0 8px 24px rgba(0,0,0,0.2); }
    .hover\:bg-discord-dark-hover:hover { background: #23272A; }
    .transition-colors { transition: background 0.2s, color 0.2s; }
    .font-bold { font-weight: 700; }
    .font-medium { font-weight: 500; }
    .truncate { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .group:hover .group-hover\:text-discord-light { color: var(--discord-light); }
    .w-8 { width: 2rem; }
    .h-8 { height: 2rem; }
    .w-10 { width: 2.5rem; }
    .h-10 { height: 2.5rem; }
    .w-12 { width: 3rem; }
    .h-12 { height: 3rem; }
    .mr-1 { margin-right: 0.25rem; }
    .mr-2 { margin-right: 0.5rem; }
    .mr-3 { margin-right: 0.75rem; }
    .ml-3 { margin-left: 0.75rem; }
    .p-4 { padding: 1rem; }
    .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
    .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
    .px-4 { padding-left: 1rem; padding-right: 1rem; }
    .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
    .rounded-l-md { border-radius: 0.375rem 0 0 0.375rem; }
    .rounded-r-md { border-radius: 0 0.375rem 0.375rem 0; }
    .border { border-width: 1px; }
    .focus\:outline-none:focus { outline: none; }
    .focus\:ring-2:focus { box-shadow: 0 0 0 2px var(--discord-blue); }
    .focus\:ring-discord-blue:focus { box-shadow: 0 0 0 2px var(--discord-blue); }
    .hover\:opacity-80:hover { opacity: 0.8; }
    .hover\:underline:hover { text-decoration: underline; }
    .bg-discord-red\/20 { background: rgba(237,66,69,0.2); }
    .border-discord-red\/30 { border-color: rgba(237,66,69,0.3); }
  </style>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
</head>
<body class="bg-discord-dark text-white">
  <div class="flex h-screen overflow-hidden">
    <%- include('partials/sidebar', { active: 'settings' }) %>
    
    <main class="flex-1 overflow-y-auto bg-discord-dark">
      <div class="container mx-auto px-4 py-8 max-w-4xl">
        <header class="mb-8">
          <h1 class="text-3xl font-bold">Bot Settings</h1>
          <p class="text-discord-muted mt-2">
            Configure your Discord bot settings
          </p>
        </header>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="md:col-span-1">
            <div class="bg-discord-darker rounded-lg shadow-lg overflow-hidden">
              <div class="p-4 bg-discord-darkest border-b border-discord-border">
                <h2 class="font-semibold">Settings</h2>
              </div>
              <nav class="p-2">
                <a href="#general" class="flex items-center px-3 py-2 rounded-md bg-discord-blue text-white">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                  General
                </a>
                <a href="#presence" class="flex items-center px-3 py-2 rounded-md text-discord-light hover:bg-discord-dark-hover mt-1">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle></svg>
                  Presence
                </a>
                <a href="#commands" class="flex items-center px-3 py-2 rounded-md text-discord-light hover:bg-discord-dark-hover mt-1">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                  Commands
                </a>
                <a href="#security" class="flex items-center px-3 py-2 rounded-md text-discord-light hover:bg-discord-dark-hover mt-1">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                  Security
                </a>
                <a href="#dashboard" class="flex items-center px-3 py-2 rounded-md text-discord-light hover:bg-discord-dark-hover mt-1">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                  Dashboard
                </a>
              </nav>
            </div>
          </div>
          
          <div class="md:col-span-2">
            <div id="general" class="bg-discord-darker rounded-lg shadow-lg p-6 mb-6">
              <h2 class="text-xl font-semibold mb-4">General Settings</h2>
              
              <div class="space-y-6">
                <div>
                  <label for="token" class="block text-sm font-medium text-discord-muted mb-2">Bot Token</label>
                  <div class="flex">
                    <input 
                      type="password" 
                      id="token" 
                      value="••••••••••••••••••••••••••••••••••••••••••••••" 
                      disabled
                      class="flex-1 px-3 py-2 bg-discord-darkest border border-discord-border rounded-md"
                    >
                    <button class="ml-2 px-4 py-2 bg-discord-dark hover:bg-discord-dark-hover text-white rounded-md transition-colors duration-200">
                      Show
                    </button>
                  </div>
                  <p class="mt-1 text-xs text-discord-muted">
                    Your token is stored securely and never exposed to the browser.
                  </p>
                </div>
                
                <div>
                  <label for="prefix" class="block text-sm font-medium text-discord-muted mb-2">Command Prefix</label>
                  <input 
                    type="text" 
                    id="prefix" 
                    placeholder="!" 
                    class="w-full px-3 py-2 bg-discord-darkest border border-discord-border rounded-md"
                  >
                  <p class="mt-1 text-xs text-discord-muted">
                    The character(s) that trigger your bot commands.
                  </p>
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-discord-muted mb-2">Logout</label>
                  <p class="text-sm text-discord-muted mb-3">
                    This will disconnect your bot from the dashboard and clear your session.
                  </p>
                  <a 
                    href="/logout" 
                    class="inline-block px-4 py-2 bg-discord-red hover:bg-opacity-80 text-white rounded-md transition-colors duration-200"
                  >
                    Logout
                  </a>
                </div>
              </div>
            </div>
            
            <div id="presence" class="bg-discord-darker rounded-lg shadow-lg p-6 mb-6">
              <h2 class="text-xl font-semibold mb-4">Presence Settings</h2>
              
              <form id="presence-form" class="space-y-4">
                <div>
                  <label for="status" class="block text-sm font-medium text-discord-muted mb-2">Status</label>
                  <select id="status" name="status" class="w-full px-3 py-2 bg-discord-darkest border border-discord-border rounded-md">
                    <option value="online">Online</option>
                    <option value="idle">Idle</option>
                    <option value="dnd">Do Not Disturb</option>
                    <option value="invisible">Invisible</option>
                  </select>
                </div>
                
                <div>
                  <label for="activity" class="block text-sm font-medium text-discord-muted mb-2">Activity</label>
                  <input 
                    type="text" 
                    id="activity" 
                    name="activity" 
                    class="w-full px-3 py-2 bg-discord-darkest border border-discord-border rounded-md"
                    placeholder="e.g. with Discord"
                  >
                </div>
                
                <div>
                  <label for="activity-type" class="block text-sm font-medium text-discord-muted mb-2">Activity Type</label>
                  <select id="activity-type" name="type" class="w-full px-3 py-2 bg-discord-darkest border border-discord-border rounded-md">
                    <option value="playing">Playing</option>
                    <option value="streaming">Streaming</option>
                    <option value="listening">Listening to</option>
                    <option value="watching">Watching</option>
                    <option value="competing">Competing in</option>
                  </select>
                </div>
                
                <button 
                  type="submit" 
                  class="w-full bg-discord-blue hover:bg-discord-blue-hover text-white font-medium py-2 px-4 rounded-md transition-colors duration-200"
                >
                  Update Presence
                </button>
              </form>
            </div>
            
            <div class="text-center text-discord-muted text-sm">
              <p>Dashboard Version 1.0.0</p>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const presenceForm = document.getElementById('presence-form');
      
      presenceForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const formData = new FormData(presenceForm);
        const data = {
          status: formData.get('status'),
          activity: formData.get('activity'),
          type: formData.get('type')
        };
        
        try {
          const response = await fetch('/api/presence', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          });
          
          if (response.ok) {
            alert('Presence updated successfully');
          } else {
            const error = await response.json();
            alert(`Failed to update presence: ${error.message}`);
          }
        } catch (error) {
          alert(`Error: ${error.message}`);
        }
      });
    });
  </script>
</body>
</html>